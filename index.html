<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Harry's Golden Snitch Quest</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app-container" class="theme-gryffindor">
        <!-- Floating Snitch Animation -->
        <div class="floating-snitch">âœ¨</div>
        
        <div class="game-container">
            <h1>âš¡ THE SNITCH'S PATH âš¡</h1>
            
            <!-- HOME SCREEN (Parchment Style) -->
            <div id="homeScreen" class="parchment">
                <!-- No emoji crests -->
                
                <div class="selection-section">
                    <div class="section-title">ğŸ° Choose Your House</div>
                    <div class="house-buttons">
                        <button class="house-btn" style="background:#740001;" data-house="Gryffindor">Gryffindor</button>
                        <button class="house-btn" style="background:#1A472A;" data-house="Slytherin">Slytherin</button>
                        <button class="house-btn" style="background:#0E2150;" data-house="Ravenclaw">Ravenclaw</button>
                        <button class="house-btn" style="background:#ECB939; color:black;" data-house="Hufflepuff">Hufflepuff</button>
                    </div>
                </div>
                
                <div class="selection-section">
                    <div class="section-title">ğŸ§™ Choose Your Character</div>
                    <div class="character-buttons">
                        <button class="char-btn" style="background:#4a6fa5;" data-char="harry">ğŸ‘“ Harry</button>
                        <button class="char-btn" style="background:#b5651e;" data-char="hermione">ğŸ“š Hermione</button>
                        <button class="char-btn" style="background:#8b4513;" data-char="ron">â™Ÿï¸ Ron</button>
                    </div>
                </div>
                
                <button id="startBtn">ğŸš€ START QUEST</button>
                <button onclick="showRankings()" class="secondary-btn">ğŸ† House Rankings</button>
                
                <div class="magical-quote">"It does not do to dwell on dreams and forget to play."</div>
            </div>

            <!-- GAME SCREEN -->
            <div id="gameScreen" style="display:none;">
                <div class="info-panel">
                    <span>ğŸ  <span id="houseDisplay">Gryffindor</span></span>
                    <span>â­ Level <span id="levelDisplay">1</span></span>
                    <span>âš¡ Score: <span id="scoreDisplay">0</span></span>
                    <span>ğŸ¯ Best: <span id="optimalDisplay">0</span></span>
                </div>
                <div id="timerBar">
                    <div id="timerFill"></div>
                </div>
                <canvas id="gameCanvas" width="500" height="500"></canvas>
                <div class="controls">
                    <p>âœ¨ Click green cells or use â†’ â†“ keys. Avoid black obstacles. âœ¨</p>
                    <button onclick="backToHome()">ğŸ  Home</button>
                    <button onclick="restartGame()">ğŸ”„ Restart</button>
                </div>
            </div>

            <!-- RANKINGS SCREEN -->
            <div id="rankingsScreen" style="display:none;" class="parchment">
                <h2>ğŸ† House Rankings</h2>
                <div id="rankList"></div>
                <button onclick="backToHome()">â¬… Back</button>
                <button onclick="resetScores()">ğŸ—‘ Reset</button>
            </div>

            <!-- RESULT SCREEN -->
            <div id="resultScreen" style="display:none;" class="parchment">
                <h2>âœ¨ Quest Complete âœ¨</h2>
                <div class="result-box">
                    <p>Your Total Score: <span id="resultPlayerScore"></span></p>
                    <p id="resultMessage"></p>
                </div>
                <button onclick="backToHome()">ğŸ  Home</button>
                <button onclick="showRankings()">ğŸ† Rankings</button>
            </div>

            <!-- LEVEL COMPLETE SCREEN -->
            <div id="levelCompleteScreen" style="display:none;" class="parchment">
                <h2>ğŸ‰ Level Complete! ğŸ‰</h2>
                <div class="level-box">
                    <p>Level <span id="completedLevel"></span> finished!</p>
                    <p>Level Score: <span id="levelScore"></span></p>
                    <p>Total Score: <span id="totalScoreDisplay"></span></p>
                </div>
                <button onclick="nextLevel()">â¡ï¸ Next Level</button>
                <button onclick="backToHome()">ğŸ  Home</button>
            </div>

            <!-- GAME OVER SCREEN -->
            <div id="gameOverScreen" style="display:none;" class="parchment">
                <h2>ğŸ’€ GAME OVER ğŸ’€</h2>
                <div class="gameover-box">
                    <p id="gameOverReason"></p>
                    <p>Your Total Score: <span id="gameOverScore"></span></p>
                    <p>Better luck next time, young wizard.</p>
                </div>
                <button onclick="backToHome()">ğŸ  Home</button>
                <button onclick="showRankings()">ğŸ† Rankings</button>
            </div>
        </div>
    </div>

    <!-- DOBBY POPUP (Canvas for drawn Dobby) -->
    <div id="dobbyPopup" class="dobby-popup" style="display:none;">
        <canvas id="dobbyCanvas" width="200" height="200"></canvas>
        <div id="dobbyMessage"></div>
    </div>

    <!-- TUTORIAL MODAL -->
    <div id="tutorial" style="display: none;">
        <div class="tutorial-box parchment">
            <h2>ğŸ§™ Welcome, Young Wizard!</h2>
            <p>âœ¨ Collect golden balls by moving â†’ or â†“.<br>ğŸ’€ Avoid black Bludgers.<br>ğŸŒŸ Light blue cells show the optimal path.<br>â±ï¸ You have limited time per level â€“ hurry!<br>ğŸ§± If you get stuck with no moves, game over!</p>
            <button onclick="closeTutorial()">Let's Go!</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
